# @wordpress/views

A lightweight package for managing DataViews view state with persistence using WordPress preferences.

The `@wordpress/views` package provides:

-   **Persistence**: Automatically saves and restores DataViews state using `@wordpress/preferences`
-   **View Modification Detection**: Tracks when views differ from their default state
-   **Reset Functionality**: Simple reset to default view capability
-   **Clean Integration**: Drop-in replacement for manual view state management

## Installation

Install the module

```bash
npm install @wordpress/views --save
```

## API Reference

<!-- START TOKEN(Autogenerated API docs) -->

### loadView

Async function for loading view state in route loaders with optional URL parameters.

_Usage_

```typescript
// In route loader
const view = await loadView( {
	kind: 'taxonomy',
	name: 'category',
	slug: 'all',
	defaultView,
	queryParams: { page: search.page, search: search.search },
} );
```

_Parameters_

-   _config_ `ViewConfig`: Configuration object for loading the view.
-   _config.kind_ `ViewConfig`: Entity kind (e.g., 'postType', 'taxonomy', 'root').
-   _config.name_ `ViewConfig`: Specific entity name.
-   _config.slug_ `ViewConfig`: View identifier.
-   _config.defaultView_ `ViewConfig`: Default view configuration.
-   _config.queryParams_ `ViewConfig`: Object with `page` and/or `search` from URL.

_Returns_

-   Promise resolving to the loaded view object.

### useView

Hook for managing DataViews view state with local persistence.

_Parameters_

-   _config_ `ViewConfig`: Configuration object for loading the view.
-   _config.kind_ `ViewConfig`: Entity kind (e.g., 'postType', 'taxonomy', 'root').
-   _config.name_ `ViewConfig`: Specific entity name.
-   _config.slug_ `ViewConfig`: View identifier.
-   _config.defaultView_ `ViewConfig`: Default view configuration.
-   _config.queryParams_ `ViewConfig`: Object with `page` and/or `search` from URL.
-   _config.onChangeQueryParams_ `ViewConfig`: Optional callback to update URL parameters.

_Returns_

-   `UseViewReturn`: Object with current view, modification state, and update functions.

<!-- END TOKEN(Autogenerated API docs) -->
